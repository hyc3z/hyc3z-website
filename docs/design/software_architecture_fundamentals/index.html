<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/docs/intro/blog/rss.xml" title="Hyc3z&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/intro/blog/atom.xml" title="Hyc3z&#39;s blog Atom Feed"><title data-react-helmet="true">Software Architecture | Hyc3z&#x27;s blog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hyc3z.github.io/docs/intro/docs/design/software_architecture_fundamentals"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Software Architecture | Hyc3z&#x27;s blog"><meta data-react-helmet="true" name="description" content="Architecture is about the important stuff…whatever that is."><meta data-react-helmet="true" property="og:description" content="Architecture is about the important stuff…whatever that is."><link data-react-helmet="true" rel="icon" href="/docs/intro/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hyc3z.github.io/docs/intro/docs/design/software_architecture_fundamentals"><link data-react-helmet="true" rel="alternate" href="https://hyc3z.github.io/docs/intro/docs/design/software_architecture_fundamentals" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hyc3z.github.io/docs/intro/docs/design/software_architecture_fundamentals" hreflang="x-default"><link rel="stylesheet" href="/docs/intro/assets/css/styles.98273567.css">
<link rel="preload" href="/docs/intro/assets/js/runtime~main.20e46fe7.js" as="script">
<link rel="preload" href="/docs/intro/assets/js/main.5f907212.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/intro/"><div class="navbar__logo"><img src="/docs/intro/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/intro/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Hyc3z&#x27;s blog</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/docs/intro/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hyc3z" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Hyc3z<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/ai/deep_learning">ai</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/big-data/hadoop">big-data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/cpp/pcal">cpp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/data/data_science">data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/database/Oracle">database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/intro/docs/design/microservices">design</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/docs/design/microservices">Microservices Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/intro/docs/design/software_architecture_fundamentals">Software Architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/blockchain/Chainlink">blockchain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/cryptography/overview">cryptography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/intro/docs/git/">git</a><button aria-label="Toggle the collapsible sidebar category &#x27;git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/python/re">python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/graph/graph-database">graph</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/intro/docs/ts/typescript">ts</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Software Architecture</h1></header><p><em>Architecture is about the important stuff…whatever that is.</em></p><p> -- Ralph Johnson</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="architect-的职责">Architect 的职责<a class="hash-link" href="#architect-的职责" title="Direct link to heading">​</a></h5><ul><li>做架构决定</li><li>持续分析架构</li><li>紧跟潮流</li><li>确保决定能够被执行</li><li>多样化的探索，经验</li><li>业务知识（Domain Knowledge）</li><li>人际交往技能</li><li>了解，驾驭政治</li></ul><p><img alt="MindMap of software architect roles" src="/docs/intro/assets/images/fosa_0101-c2d9e21a39c68109c675a1db46cc5cc2.png" width="1376" height="931"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="structure-vs-architecture">Structure vs Architecture<a class="hash-link" href="#structure-vs-architecture" title="Direct link to heading">​</a></h5><p><img alt="Software architecture structure" src="/docs/intro/assets/images/fosa_0103-117e4d2c3b58055daadee13447af0a5e.png" width="1397" height="973"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="architecture-characteristics">Architecture Characteristics<a class="hash-link" href="#architecture-characteristics" title="Direct link to heading">​</a></h5><p><img alt="Software architecture characteristics" src="/docs/intro/assets/images/fosa_0104-e6c3bce688e20b0528abac7043d5e735.png" width="1397" height="973"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="architecture-decisions">Architecture Decisions<a class="hash-link" href="#architecture-decisions" title="Direct link to heading">​</a></h5><p><img alt="Architecture decisions" src="/docs/intro/assets/images/fosa_0105-d8d2f9f7028235b90e49c93d8140ff94.png" width="1397" height="985"></p><p><strong>Guide</strong> rather than <strong>Specify</strong></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="design-principles">Design Principles<a class="hash-link" href="#design-principles" title="Direct link to heading">​</a></h5><p><img alt="Design Principles" src="/docs/intro/assets/images/fosa_0106-e960b87071d301117a66359ad5a9da5a.png" width="1397" height="973"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="continually-analyze-the-architecture">Continually Analyze the Architecture<a class="hash-link" href="#continually-analyze-the-architecture" title="Direct link to heading">​</a></h5><p>分析架构不是一天的事情，而是持续不断地评估，提出改进的建议。</p><p>Vitality 三年前定下的架构今天是否还有效？</p><p>不应该盲目自信，而应该批判的眼光看目前的架构</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="keep-current-with-latest-trends">Keep Current with Latest Trends<a class="hash-link" href="#keep-current-with-latest-trends" title="Direct link to heading">​</a></h5><p>架构师做出的决定通常是会持续很久，难以改变的。了解当下的趋势和最新技术有助于对未来做出更好的判断，进而做出更好的决定。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="ensure-compliance-with-decisions">Ensure Compliance with Decisions<a class="hash-link" href="#ensure-compliance-with-decisions" title="Direct link to heading">​</a></h5><p>有足够的权利和控制权，让Dev能够、不得不听从决定</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="diverse-exposure-and-experience">Diverse Exposure and Experience<a class="hash-link" href="#diverse-exposure-and-experience" title="Direct link to heading">​</a></h5><p>并不是说要成为懂王，啥都懂，而是最起码各个板块都要有涉猎，有最基本的认识和理解。这个其实是比较痛苦的，需要去跨出自己的领域了解很多非常陌生，根本不了解的东西。相对来说，breadth（宽度）比depth（深度）更重要。比如对Hadoop的每个参数怎么调都非常了解，只会让你成为一个Hadoop的专家，但并不能让你成为一个优秀的大数据架构师。如果你能够了解Stream processing以及各种框架诸如Hadoop，Spark，Flink的发展和演进，各自的优劣，那么对架构师来说是更有价值的知识。</p><p>这一点其实我也想多写一些感受，毕竟这些时间也学了不少东西，很多时候真的没必要太纠结各种细节，比如API怎么调用，函数什么入参，xx protocol前几位是啥后几位是啥，xx格式怎么定义的（当然考试另说），因为这些东西你就算学的时候看了，一段时间不用肯定会忘记。更不要说人的年龄也会不断增长，没办法一直保持高强度的学习，记忆也会加速衰退，你要挑对你<strong>帮助最大</strong>的部分去学，比如了解架构、数据流、设计的逻辑等，然后去思考、总结，相对比精通”怎么用，怎么装“更有帮助。</p><p>（所以我一直挺反感现在的xx大厂面试，永远是浮于表面，背出来的算法和同样”背面经“得来的技术，缺乏对思考的鼓励和尊重。当然，那些“面试官”们为了自己的kpi都忙得焦头烂额，谁又会去花心思准备面试题呢？）</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="have-business-domain-knowledge">Have Business Domain Knowledge<a class="hash-link" href="#have-business-domain-knowledge" title="Direct link to heading">​</a></h5><p>这就对人的交流技能要求比较高了。了解业务最快的方法，就是问。听听别人是怎么说的，比看什么文档快n倍。这就对你的提问能力有一定要求，最起码你不能问一些别人无法回答的问题，而是一些目的明确的，有价值的问题。恕我直言，目前xx大厂基本别指望有啥像样的文档了，敏捷开发哪有时间给你写文档，知识基本都是人传人。了解业务才能更好地了解问题，看上去是废话，但是由于现实的各种阻碍，这还确实是个问题。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="possess-interpersonal-skills-understand-and-navigate-politics">Possess Interpersonal Skills, Understand and Navigate Politics<a class="hash-link" href="#possess-interpersonal-skills-understand-and-navigate-politics" title="Direct link to heading">​</a></h5><p>基本上架构的问题，<strong>都是人的问题</strong>，这个问题确实很哲学。因为归根结底，如果大家都是Linus那样的大神，人脑编译器，即便是屎山也维护给你看，根本没问题。之所以要搞那么多架构，拆各种模块，就是因为人是会犯错的，而且一个公司有大佬也有平庸之人，有时也有（你懂得），所以这些设计其实不仅是技术，也是对人的一种容错。</p><p>如果一个公司发生了架构上的争执，那么最起码证明有人不愿意妥协。这时就需要一个有领导力，能够拍板的人去带领整个队伍前进——有时决定并没有最好，但你得做。</p><p>这也是为啥很多时候重构成为了一个政治问题，一个话语权的问题，一个Ownership的问题。人嘛，有人的地方总有江湖。很多程序猿都很抵触这种人与人之间的事，但是这是没法避免的。你总要面对。而这也是很难学的，（尤其对我而言），只能通过日积月累慢慢地去体会了。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="unknown-unknowns">Unknown unknowns<a class="hash-link" href="#unknown-unknowns" title="Direct link to heading">​</a></h5><p><img alt="Knowledge Pyramid1" src="/docs/intro/assets/images/fosa_0203-0e7d473fa03889b42bc833f7286fb91d.png" width="1278" height="966"></p><p>前美国防部长Donald Rumsfeld说：</p><p><em>because as we know, there are known knowns; there are things we know we know. We also know there are known unknowns; that is to say we know there are some things we do not know. But there are also unknown unknowns—the ones we don’t know we don’t know.</em></p><p>这也是为啥即便在项目开始前做Big Design，也无法一劳永逸。架构是随着业务和一些难以预料的事情（如：技术更迭，安全，政治因素等）而必须不断更迭的，你永远无法预测未知。我不知道明天的股票价格是怎么样，这是Known Unknown，因为股票会涨会跌，会停牌，这些可能性是确定的，我只是不知道现实会收敛到哪种可能性上。但是我无法预测一个我根本不知道的事情会以何种形式发生，这是Unknown unknown，也是很多人常说的“黑天鹅”。这也是为啥Engineering Practice必须和架构相辅相成，再好的架构没有优秀的迭代模式，也是注定被淘汰的。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="laws">Laws<a class="hash-link" href="#laws" title="Direct link to heading">​</a></h5><p><em>Everything in software architecture is a trade-off.</em></p><p><em>If an architect thinks they have discovered something that</em> <em>isn’t</em> <em>a trade-off, more likely they just haven’t</em> <em>identified</em> <em>the trade-off yet.</em></p><p><em>Why</em> <em>is more important than</em> <em>how.</em></p><p>所有的设计都是一种妥协，如果你觉得发现了一种完美的设计，更大的可能性是你还没有发现它的缺点。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="bidirectional-communication">Bidirectional Communication<a class="hash-link" href="#bidirectional-communication" title="Direct link to heading">​</a></h5><p><img alt="Collaboration View" src="/docs/intro/assets/images/fosa_0202-c304eb6336e4d39125c7be9f36bd202c.png" width="1435" height="812"></p><p>我觉得这一点也非常重要，架构师并不是领导：我拍板定了架构，行吧，下面的dev小弟们你们就去整吧。不是这样的，因为下面的小弟首先不一定会听架构师的意见，其次不一定能做得到。而且架构师也并不知道dev小弟们做得如何，得不到反馈就会出现偏差。这就使得一个良好的沟通、交流的平台或者方式尤为重要。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="trade-offs">Trade-offs<a class="hash-link" href="#trade-offs" title="Direct link to heading">​</a></h5><p>所有关于架构的问题都有一个通用的答案：</p><p>It depends.</p><p>没有正确答案，也没有错误答案。有的只是权衡，和妥协。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="cohesion-coupling-and-connascence">Cohesion, Coupling and Connascence<a class="hash-link" href="#cohesion-coupling-and-connascence" title="Direct link to heading">​</a></h5><p>内聚，耦合与共生</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="cohesion">Cohesion<a class="hash-link" href="#cohesion" title="Direct link to heading">​</a></h4><p><em>Attempting to divide a cohesive module would only result in increased coupling and decreased readability.</em></p><p> -- Larry Constantine</p><p>这个回到我们软件工程学的东西了，各种内聚类型。</p><p>最差的内聚：</p><p>Temporal Cohesion（时间内聚）</p><p>Logical Cohesion（逻辑内聚）</p><p>Coincidental Cohesion（偶然内聚）</p><p>其次：</p><p>Communicational Cohesion（通信内聚）</p><p>Procedural Cohesion（过程内聚）</p><p>最好：</p><p>Sequential Cohesion（顺序内聚）</p><p>Functional Cohesion（功能性内聚）</p><p>关于顺序内聚和过程内聚，顺序内聚是没有执行顺序要求的，任意一个模块的输出都可以当做另一个模块的输入。而过程内聚则对输入的顺序有要求。</p><p><img alt="LCOM Modularity" src="/docs/intro/assets/images/fosa_0301-093d61d62d6cc9f79628b9e6af1b1025.png" width="1434" height="656"></p><p>X的内聚性最好，Y最差，因为Y的方法也可以被拆成多个独立的Class。Z则是混合内聚，可能需要重构。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="coupling">Coupling<a class="hash-link" href="#coupling" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="abstractness">Abstractness<a class="hash-link" href="#abstractness" title="Direct link to heading">​</a></h5><p><img alt="image-20220904094221466" src="/docs/intro/assets/images/image-20220904094221466-87174c8fbb32adbcfd2f3dc38744fe2a.png" width="419" height="158"></p><p>m~a~是抽象的元素，m~c~是非抽象元素。比如一个5000行的main函数，A=1/5000，证明抽象度很低。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="instability">Instability<a class="hash-link" href="#instability" title="Direct link to heading">​</a></h5><p><img alt="image-20220904094425948" src="/docs/intro/assets/images/image-20220904094425948-c9a3ecc2798352769b16fa001a683778.png" width="334" height="140"></p><p>C~e~代表Efferent，outgoing C~a~代表Afferent，Incoming</p><p>这个等式代表了改动一行上游/下游代码是否会影响这段代码。如果你要修改的函数调用多个class，那么很有可能上游的任意一个class改了代码（如版本升级等）你也要跟着改，这就是高Efferent。相对那么就是高Afferent。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="distance-from-the-main-sequence">Distance from the main sequence<a class="hash-link" href="#distance-from-the-main-sequence" title="Direct link to heading">​</a></h5><p><img alt="image-20220904095130021" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAacAAABhCAYAAAByKW6FAAAMPmlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnltSSWgBBKSE3gQRKQGkhNACSC+CqIQkQCgxBoKKvSwquBZURMGGrooodpodsbMo9r5YUFHWxYJdeZMCuu4r3zvfN/f+958z/zlz7twyAGgc50kkuagmAHniAmlsSABzTHIKk/QEkIEOoAEEMHn8fAk7OjoCQBs4/93eXYd+0K44yrX+2f9fTUsgzOcDgERDnC7I5+dBfAAAvIovkRYAQJTzFpMLJHIMG9CRwgQhXijHmUpcJcfpSrxH4RMfy4G4FQAyjceTZgKgfgnyzEJ+JtRQ74XYWSwQiQHQYELsm5c3UQBxGsS20EcCsVyflf6DTubfNNMHNXm8zEGsnIvCyIGifEkub+r/WY7/bXm5soEY1rDRsqShsfI5w7rdzJkYLsc0iHvE6ZFREGtD/EEkUPhDjFKzZKEJSn/UiJ/PgTUDehA7C3iB4RAbQRwszo2MUPHpGaJgLsRwhaBTRAXceIj1IV4ozA+KU/lslE6MVcVC6zOkHLaKP8uTKuLKY92X5SSwVfqvs4RclT6mXpQVnwQxFWLLQlFiJMTqEDvl58SFq3xGFWVxIgd8pLJYef6WEMcKxSEBSn2sMEMaHKvyL8nLH5gvtjFLxI1U4X0FWfGhyvpgrXyeIn84F+ySUMxOGNAR5o+JGJiLQBgYpJw79kwoTohT6XyQFATEKsfiVElutMofNxfmhsh5c4hd8wvjVGPxxAK4IJX6eIakIDpemSdelM0Li1bmgy8DEYADAgETyGBLBxNBNhC19zT0wCtlTzDgASnIBELgqGIGRiQpesTwGAeKwJ8QCUH+4LgARa8QFEL+6yCrPDqCDEVvoWJEDngCcR4IB7nwWqYYJR6MlggeQ0b0j+g82Pgw31zY5P3/nh9gvzNsyESoGNlARKbGgCcxiBhIDCUGE+1wQ9wX98Yj4NEfNhechXsOzOO7P+EJoYPwkHCN0Em4NUE0V/pTlqNBJ9QPVtUi/cda4NZQ0w0PwH2gOlTG9XBD4Ii7wjhs3A9GdoMsR5W3vCrMn7T/NoMf7obKj+JMQSlDKP4U259Hqturuw2qyGv9Y32UuaYP1psz2PNzfM4P1RfAc/jPnthCbD92BjuBncMOYw2AiR3DGrE27IgcD66ux4rVNRAtVpFPDtQR/SPewJ2VVzLfuda52/mLsq9AOEX+jgaciZKpUlFmVgGTDb8IQiZXzHcaxnRxdnEBQP59Ub6+3sQovhuIXtt3bt4fAPgc6+/vP/SdCzsGwF4P+Pg3fedsWfDToQbA2Sa+TFqo5HD5gQDfEhrwSTMAJsAC2ML5uAB34A38QRAIA1EgHiSD8TD7LLjOpWAymA7mgGJQCpaBVWAt2AA2g+1gF9gHGsBhcAKcBhfAJXAN3IGrpwu8AL3gHfiMIAgJoSMMxAAxRawQB8QFYSG+SBASgcQiyUgakomIERkyHZmHlCJlyFpkE1KD7EWakBPIOaQDuYU8QLqR18gnFENpqA5qjFqjw1EWykbD0Xh0HJqJTkKL0PnoErQCrUZ3ovXoCfQCeg3tRF+gfRjA1DA9zAxzxFgYB4vCUrAMTIrNxEqwcqwaq8Oa4X2+gnViPdhHnIgzcCbuCFdwKJ6A8/FJ+Ex8Mb4W347X4634FfwB3ot/I9AJRgQHgheBSxhDyCRMJhQTyglbCQcJp+Cz1EV4RyQS9Yg2RA/4LCYTs4nTiIuJ64i7iceJHcRHxD4SiWRAciD5kKJIPFIBqZi0hrSTdIx0mdRF+kBWI5uSXcjB5BSymDyXXE7eQT5Kvkx+Sv5M0aRYUbwoURQBZSplKWULpZlykdJF+UzVotpQfajx1GzqHGoFtY56inqX+kZNTc1czVMtRk2kNlutQm2P2lm1B2ofado0exqHlkqT0ZbQttGO027R3tDpdGu6Pz2FXkBfQq+hn6Tfp39QZ6g7qXPVBeqz1CvV69Uvq7/UoGhYabA1xmsUaZRr7Ne4qNGjSdG01uRo8jRnalZqNmne0OzTYmiN0IrSytNarLVD65zWM22StrV2kLZAe772Zu2T2o8YGMOCwWHwGfMYWxinGF06RB0bHa5Otk6pzi6ddp1eXW1dV91E3Sm6lbpHdDv1MD1rPa5ert5SvX161/U+DTEewh4iHLJoSN2Qy0Pe6w/V99cX6pfo79a/pv/JgGkQZJBjsNygweCeIW5obxhjONlwveEpw56hOkO9h/KHlgzdN/S2EWpkbxRrNM1os1GbUZ+xiXGIscR4jfFJ4x4TPRN/k2yTlSZHTbpNGaa+piLTlabHTJ8zdZlsZi6zgtnK7DUzMgs1k5ltMms3+2xuY55gPtd8t/k9C6oFyyLDYqVFi0WvpanlaMvplrWWt60oViyrLKvVVmes3lvbWCdZL7BusH5mo2/DtSmyqbW5a0u39bOdZFtte9WOaMeyy7FbZ3fJHrV3s8+yr7S/6IA6uDuIHNY5dAwjDPMcJh5WPeyGI82R7VjoWOv4wEnPKcJprlOD08vhlsNThi8ffmb4N2c351znLc53RmiPCBsxd0TziNcu9i58l0qXqyPpI4NHzhrZOPKVq4Or0HW96003httotwVuLW5f3T3cpe517t0elh5pHlUeN1g6rGjWYtZZT4JngOcsz8OeH73cvQq89nn95e3oneO9w/vZKJtRwlFbRj3yMffh+Wzy6fRl+qb5bvTt9DPz4/lV+z30t/AX+G/1f8q2Y2ezd7JfBjgHSAMOBrzneHFmcI4HYoEhgSWB7UHaQQlBa4PuB5sHZwbXBveGuIVMCzkeSggND10eeoNrzOVza7i9YR5hM8Jaw2nhceFrwx9G2EdII5pHo6PDRq8YfTfSKlIc2RAForhRK6LuRdtET4o+FEOMiY6pjHkSOyJ2euyZOEbchLgdce/iA+KXxt9JsE2QJbQkaiSmJtYkvk8KTCpL6hwzfMyMMReSDZNFyY0ppJTElK0pfWODxq4a25Xqllqcen2czbgp486NNxyfO/7IBI0JvAn70whpSWk70r7wonjVvL50bnpVei+fw1/NfyHwF6wUdAt9hGXCpxk+GWUZzzJ9Mldkdmf5ZZVn9Yg4orWiV9mh2Ruy3+dE5WzL6c9Nyt2dR85Ly2sSa4tzxK0TTSZOmdghcZAUSzoneU1aNalXGi7dmo/kj8tvLNCBP/JtMlvZL7IHhb6FlYUfJidO3j9Fa4p4SttU+6mLpj4tCi76bRo+jT+tZbrZ9DnTH8xgz9g0E5mZPrNllsWs+bO6ZofM3j6HOidnzu9zneeWzX07L2le83zj+bPnP/ol5JfaYvViafGNBd4LNizEF4oWti8auWjNom8lgpLzpc6l5aVfFvMXn/91xK8Vv/YvyVjSvtR96fplxGXiZdeX+y3fXqZVVlT2aMXoFfUrmStLVr5dNWHVuXLX8g2rqatlqzsrIioa11iuWbbmy9qstdcqAyp3VxlVLap6v06w7vJ6//V1G4w3lG74tFG08eamkE311dbV5ZuJmws3P9mSuOXMb6zfarYabi3d+nWbeFvn9tjtrTUeNTU7jHYsrUVrZbXdO1N3XtoVuKuxzrFu02693aV7wB7Znud70/Ze3xe+r2U/a3/dAasDVQcZB0vqkfqp9b0NWQ2djcmNHU1hTS3N3s0HDzkd2nbY7HDlEd0jS49Sj84/2n+s6FjfccnxnhOZJx61TGi5c3LMyautMa3tp8JPnT0dfPrkGfaZY2d9zh4+53Wu6TzrfMMF9wv1bW5tB393+/1gu3t7/UWPi42XPC81d4zqOHrZ7/KJK4FXTl/lXr1wLfJax/WE6zdvpN7ovCm4+exW7q1Xtwtvf74z+y7hbsk9zXvl943uV/9h98fuTvfOIw8CH7Q9jHt45xH/0YvH+Y+/dM1/Qn9S/tT0ac0zl2eHu4O7Lz0f+7zrheTF557iP7X+rHpp+/LAX/5/tfWO6e16JX3V/3rxG4M32966vm3pi+67/y7v3ef3JR8MPmz/yPp45lPSp6efJ38hfan4ave1+Vv4t7v9ef39Ep6Up/gVwGBDMzIAeL0NAHoyAAy4P6OOVe7/FIYo96wKBP4TVu4RFeYOQB38f4/pgX83NwDYswVuv6C+RioA0XQA4j0BOnLkYBvYqyn2lXIjwn3Axuiv6Xnp4N+Ycs/5Q94/n4Fc1RX8fP4Xz6N8UVMj9rEAAAA4ZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAKgAgAEAAAAAQAAAaegAwAEAAAAAQAAAGEAAAAAn5EwcgAAFAlJREFUeAHtnXl8VcUVx88LREiirZIElEVAIZAFElFsKSBalcrSImjV0kX7Qa0WK38onyofP/10164frVYtBdxQoEZAlKhYqVgFKgQChN1IEjazQKmQBAhJes683Jt3n3m85d773n33/kbJXWf7zrx7Zs7MnPG1NDe1ERwIgAAIgAAIOIhAioPSgqSAAAiAAAiAgCIA4YSKAAIgAAIg4DgCEE6OKxIkCARAAARAAMIJdQAEQAAEQMBxBCCcHFckSBAIgAAIgACEE+oACIAACICA4whAODmuSJAgEAABEAABCCfUARAAARAAAccRgHByXJEgQSAAAiAAAhBOqAMgAAIgAAKOIwDh5LgiQYJAAARAAAQgnFAHQAAEQAAEHEcAwslxRYIEgQAIgAAIQDihDoAACIAACDiOAIST44oECQIBEAABEIBwQh0AARAAARBwHAEIJ8cVCRIEAiAAAiAA4YQ6AAIgAAIg4DgCEE6OKxIkCARAAARAAMIJdQAEQAAEQMBxBCCcHFckSBAIgAAIgACEE+oACIAACICA4whAODmuSJAgEAABEAABCCfUARAAARAAAccRgHByXJEgQSAAAiAAAhBOqAMgAAIgAAKOIwDh5LgiQYJAAARAAAQgnFAHQAAEQAAEHEcAwslxRYIEgQAIgAAIQDihDoAACIAACDiOAIST44oECQIBEAABEIBwQh0AARAAARBwHAEIJ8cVCRIEAiAAAiAA4YQ6AAIgAAIg4DgCEE6OK5LkSVBrayudPn06eRKMlIKASQKo8yYBRuEdwikKWHi1g0BLSwv94Y/P0IwZD9LJkyc7HsThrK2tLQ6xIAoQMBLw1/lnE1LnjSnxxlVXb2QTubSagAiIqsoDVF29n1paWq0OPmR4Sxa/TrX1dTR2zCgqKsoP+R4egIDVBPx1vjrudd7qfCRLeK4WTvsq99PB/YeIfFwcbfKHnTrvaHn7fD5SLXE+qvPW9mfqPaLsXlnUt++FlJ6Wpp77A8HfRBD44IP19MyzL6iofZQC4dReCPv2VdPBgzV81cb/cRXnusyVWh2HDRtKn31WT7W1depted7KjYmCghzKzOyh7uFPZATQY4+Mk1VvuVY4nTlzhp58Yj6VbtrKrOSH6kfW1i6ktGu5q37QcuQTn89/pWmO5L309DSaOOk6Gj9+HF0y8GLq2tW12PyQHPi3sbGJnnxyvp4yKR/5WKgPsX7XeyenTzfTX59aQBtLpZ5rddh/lIaYVHup0fInsM7fdPMk+sl9M+SJ59zGjVto69btdPvtt1KXLl08l/9kybBrv7Ly8erZqwfl5uWoD1h9bT3V1R8x/EDT07tT/wH9A8rK/7HTBNOO7buVwJIPY/Grb9Cr/3iDJk++jmbNuovOOSc1wB9O7SYwf/4iqqs7okdTf+SIUid27ertj4sI5+ye2ZTH9VxEUUNjI6tb9xvquQio7J6ZlJ2dpfi1trawWvQrOksvnMhEhqamU7RgwSJ67bU3VcPmttumqoZn5PkXknDxIuBa4ZSa2pVmz56pKqFUzBMnGmjq1BmGH+3Pfz67XTXkV+lJy1LeFSc/emmV/vvf/6Hlr6+inTt3K78rV/6TVSRHaM7DP6ELepwfr3LydDx79+6jt95abWBQV3tUla3hpgcvpJ4/8MA9zKKV624bNTc30wMP/oJ27/pEpzFhwte5QXUnpaT4BXlKis/VvX8ZAxUO8ls+/vkJ2r2ngtav30Tvv7+WGll4wyUHAdcKJ8Ef2GWvqt5jEEzSayooGMo9oHNCllRqairdcMM1dO21Y2nZshJ6+unn1bsbNmymOY88Rk/+5deu/pGHBBPHBzJDauHLxV/4qAQ2JOKYHENUDQ1NlJGRZriXiAt/79EveOSjvIsFk9bGF5XeqFEjqXv37olIWkLi3MBquxdfWEKVVQeooaFRZ2FNYjSy1oSGUEIT8MxU8k/2fmqgkJ8ngiky1Zy0Tm+55Vt0002T9DB27thDq979QL/25ol8+ux1H360gd7/17ovRCKTXURwJcqVlm6hqdNm0J49xnqVqPRo8W7aVK6d6sfLLx+mn3vhpIG1JDt27FaCKT2tu1J5Tv/uNFbh9/VC9l2TR1f3nLRSko/Ytm27tUt1zCsYEnWv59ZbprB66T1uxfvX9TzH+uuvXzOaW6XdDGHjwhoCJ0/6xwiklzT5m+PpjRWr9N6vtIgTOXvq+PFGOnWyiQ4drqGcnEusybAFoWzhgf7Atn1+3pCzagcsiNJxQQwflktz5/6ZevfuqbQn0rM8c6aFysq2Oy6tSFBoAp7oOcnY0a6de3QK0t4vKox+jUxm1gU0cuRlejgyQL969Yf6tZdO4iEYXlm0TA3uj7yiiCZNvFYXTBpnbXxQu/b6Uer5zh17DRiuGFlI0vP3kpPJHzk5A+ncczMojXtOop6HSz4CnhBOBw4ephqexKC5DB5vGjLkUu0y4qOMYWVlZxrer6ioNFzjwhoCNZ/V0mvFb6rZVHf/6AfUt19v/5To9uCldyATJeA6CIgpqe08wzTQFRbmBV7iHASShoAnhFPZ5nJDqzsvV1QdsbWmhhfkGgq3vv5oQsc+DImJ60Wg8sjaiKVH9PwLr6oxgwkTrqXBgwdQ1y4prMbriEdOT5xI3Mwr6TkGpqcjZYk7Ky011nNZn5c7dHDiEoSYQcAEAdcLJ/nQlZfvMiDKZ510rAtpa+v8K+21AGvrvCqchIA9AqqsrJxKSt7jdTmZdOed09tR++iSS/pp2FXMrTx9OlGussq4lihR6QiMVxaWBrr8/CFQaQUCwXlSEXC9cBI9/A6eWRfoikyoOsQUTKCrq6mPq225wLjdeH6KVVPzeMGtTIK4jy0YyJiBuC7cc0pPSzdkuXzbTsN1PC9OHG+IZ3Rh41LjTTuN402yAN1r401hQeGFpCHgeuG0/8Ahqg2wLCDrm4YOHRRTAUkvLHgRn9jei7UXFlMiXO5pxfJ3SCxzXMkTT0aPvkLPbWdmiuIxKUNPQNCJpMdJar3g8SZRew66dEBQqnEJAslDwPXTeNR4U0B55KmptbGNNzU3n6Gq6oMBoYkNszZTrVP5qEi48XA+H/c+WDg71dWyialXi1eoiQ933f09g9AX6wYDBvRT61e09Et+pMGQkuL6NpaW5ZBHtb4pUMvK0mnE5cNDvo8HIOB0Aq4WTmLGJHi8KY+tQgRajoimgER1sr3cb8ZI/EnrtBdPW43ViXHaWbMeYdNIHaZmYg0rEn/Z2T3o2Wd+R5lZsac5knhieUeE/JIlK5RpqJt5sfPgwQMNwYjJHU3Fpz0QdS2Ek5/Gli1B65t4vOkcTKHWqkqnx856452+2H4zkT31s6XLrc9cLZyam0+ziqhjvEnUMKO/NjLmsizbvM0w608aqmam6krLXwzP+nyxGC8V0RjYVA6frTTe9uP8C5xpD1CmhYtBTpkEcdutU76QGfmQyDhUsJMGiNeNxHc2rpqbOyjmGanBjF15LWpZV2bMPZlytXCq5r2cZLxJ+6j15A9fP14vE4uTVtNH6zYavErlHjM6duvOMsg/+8F74jKhQj7urZyHWHuNhoxbfCFqzccf/7sK9Y4f3sYWtP3Ws4Oj6RV0v6mpSalVg9/z2rXY09sZsMhc8l9YWOA1DMivywi4Wjht4SnJgZ2LvPwc6hbj+qZTp07zB8A4G6p//7705fPPM1UlRFg4UWCYylSUnle9u4a2sy00MbUz/vpxIX337NVTtXa1DtSnvMmeqPWscGIqKRrXwttOiBOzONH4Fevh0oO10ml7OWlhyvomu+zpSYNAevx2OTv42JVWhGsvAdcKJ/94E48PtfMTlZ6s+4hVEEgvbN++/cRDH7qb8q3x1K0b7OrpQGI4aWo6Sc8tWKzKqUfm+WwT7aX2UNpBa7y5AD+rqdXLU16SR1LOZl1JyWpaWfJuVMHU8JICGQdb+FIxW6xfGblfzsekyeNpIm9jYZXbumWHIaiC/LNb2ze8HMWFrD2TLWMMhRCF/0heleUCDz80k3pgl95IcLn6HdcKJ5kFJ5bDNSeqvcKi2FQdotJbtnSlQTBlZWbSjTdO1IL34NG/JbjZjM+b9wrV8yaQ4j7kvbPESUPCr4oVKwx+6aTtUKxeaP8j7x3//Didd15G4O2ozqXndezY5xypJgUj9y71QlGIwq/Km4Vf987WNw3NG2xqBmkoAoqTPIwiv6HCCnlfAMXJRV/ikrD4pS9OGBwbjWuFk2ZPTxtvyuYZav36XhRTQdSxXb41a9bqfqV63nPvD7gXZp96Q4/MxSd7P6mkt99ereznfYP3zQo3JbyVrcsvW/ZWBxH+ulR8WkW9+1zYcS/KM4lz+vQbadq0G6LyOXfuQiouXknf/963acyYjvVYkQRi5d5Kan0Tq0QDP7RmFpmfLf3Tp09lThPO9oolz6zkEzJBkDEh0TjlgWuFU/DMOjXe1C30xoJnK5Al/1ihb5Mh7109bhRdd93Ys3mJ+JlMJ7dCNRVJhCKoz7a5YiRhWPWO5Hvusy8q+3kzf3wH3fztb4YNurGxiZaycNI+xHKU3V+tcNF+ELVdZbumdknoRn6lMoM0AICMNw0ZMijgjrWn0XKyNnZrQ8PUcGt5Wh2aK4WT7N9UzuuRNCeagljHm2QPmGKe4qx9APr170Oz7r9LC9rUUYTSH//0Nzqw/4CpcCL1nMb6/McemxPzuFuk8UTy3kcfbaSPN5ZRAY8DTrnxBlbjaYRD+5ZezsCB/aiSx/40V8vjUF52W8viM97kZcbIe2IIuFI4qXUfAVsHyHcvlvGmw4dq6be/eVwXTGJd4eGf3seDtdasFZKZSVVV1V/Yg8euqpCV1YP+d+x/CR9slkkQTz01X6nvb+U1TZH25jqzr1fDViW86tQU8l3GGaR2jTe5jnH4tpDrspxsGXKlcFLrm3grC63+yeSFaMabpLu/e08FPfboU7pdvjQWTL///c94y+chlpWx2OR74vFfqenIlgUaJiBR+yTazZv3MslGjVdfM4rt50W+KLqzKcyi1POqlYhTp9hiCTfCtHouLAqHY/+mRNdvxG8NAVcKp7VrN+g/WMGUX8DrmyIcb5JW/fp1paxue5rHQ5oUZVHlzXnofsrNtX5vHOk18P+ecR9/vJknQbyv8vvd6TdHpWIUtV7/IPt6XjZhtGnTVkM9z+CGR6xGjT1TAZHRpCHgOuEkqo7t2zrGm6QkBgy8uNOPoLS4ZRGlDM7Lcd26DbTijVXKfp5WghN4Pcq999xBX/ryudotHKMkIGOAomot4TUyC55brCZBSA+uT59eUYXUygtfu3cPWlfG3QUpO69ZhpfxyrVrNxr4yaJwbJFhQKJfqGn/QZNnMCFCx+PIk6QXTkePHKPlK97xb2XB6jiZ9r2xtEyHLaqOyk+reYxjAZ+JAkTuyBRwOfr3CSpn1YgYiNXUI3Jf9sL5Do+HXMUz8+BiI/Dfo8fopYXFdJSPO3i6cw2XjcZYZt7NnDlHWTKYPPl6nuhwcaeR1LP6b/GS1/mZj8fnDtCGDZsN78m9Rx99grKy2eQRF6k0JgYNGmB4xw0XR3gt2CuLlpNPLLBLPWcupaVbDVkTFjLFXVjJOKsIK2HrNVdRUc2bVb6rlibIZChZLF1RUWUw8ST1cPbsX6qJUsJHvgZt3PiZNOl63tSyv9yCSzCBpBdOS5eXqFX6oThKJVzzwbpQjw33ZVwpn7dwn8ZWsa+8sshzrXEDDAsulr3+Ni1dWqKH5BdM8hnwn1VWVpP8S89IoxkDp+vvBZ4sWrycDcKGssDQphola9as173I7riz7r9Tv3bLycKXl7dbohB+mvNz1K4aWOAXF7+pXfL4aA5dz+agIlVp6x6T/OTQ4cOKgzYDtKPGGTMmKuHt/E+jKD2poqLhEE5GTAm7SnrhdPmI4e1rkNqkvcggg6ui9mPWqqCRtbQwM87NoMsuK6C83BxYcjbiMXVVVJhPx6dOpJT2xcr+EtDKSHUA2BhtK02dEnoBbCGHIVYYUtrtuRlLVzb8a1W23tqIzRjxx2WcS3u6I0YUqB6AFIh8dKXeBqulNDbSW5BnY8Zc6TnBJHx6X3QhNzAnUhfeA8zfEGIgClj7QUCJU1XR/0x4ySLv3r2jUzX7A8JfOwgkvXASoSL/4JxHYMSIYST/zLirrvoqyT+vu7Fjv0LyDy48gUsv7W/ZWsTwseENuwjA/o5dZBEuCIAACIBAzAQgnGJGB49eJiCt86ysC6hP79jt+nmZH/IOAuEIJL1aL1wG8RwE7CAgswLHjfsqG61NtyN4hAkCnieAnpPnqwAAxEoAgilWcvAHAuEJQDiFZ4Q3QAAEQAAE4kwAwinOwBEdCIAACIBAeAIQTuEZ4Q0QAAEQAIE4E4BwijNwRAcCIAACIBCeAGbrhWeENzohIFYKBrC19oaGBmxX3wkf3HIfAbHRJ/YKT7CZKNlbDM5eAr6W5ibNmIe9MSF01xEQa+BiPig1NdV1eUOGQKAzAqjznVGx5x6Ekz1cESoIgAAIgIAJAuibmoAHryAAAiAAAvYQgHCyhytCBQEQAAEQMEEAwskEPHgFARAAARCwhwCEkz1cESoIgAAIgIAJAhBOJuDBKwiAAAiAgD0EIJzs4YpQQQAEQAAETBCAcDIBD15BAARAAATsIQDhZA9XhAoCIAACIGCCAISTCXjwCgIgAAIgYA8BCCd7uCJUEAABEAABEwQgnEzAg1cQAAEQAAF7CEA42cMVoYIACIAACJggAOFkAh68ggAIgAAI2EMAwskerggVBEAABEDABAEIJxPw4BUEQAAEQMAeAhBO9nBFqCAAAiAAAiYIQDiZgAevIAACIAAC9hD4P2x4tSqGG+VMAAAAAElFTkSuQmCC" width="423" height="97"></p><p>A就是Abstractness，I就是Instability。</p><p><img alt="img" src="/docs/intro/assets/images/fosa_0303-99281600913d8654d57e151793427664.png" width="883" height="819"></p><p>这是很难平衡的过程。抽象度越高，意味着代码的功能越少，越没用。反之抽象度太低，维护成本又太高。</p><p><img alt="img" src="/docs/intro/assets/images/fosa_0304-839f57778371fca1942623b45ff76574.png" width="786" height="738"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="connascence">Connascence<a class="hash-link" href="#connascence" title="Direct link to heading">​</a></h4><p>共生</p><p><em>Two components are connascent if a change in one would require the other to be modified in order to maintain the overall correctness of the system.</em></p><p> -- Meilir Page-Jones</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="static">Static<a class="hash-link" href="#static" title="Direct link to heading">​</a></h5><p>Connascence of Name</p><p>Connascence of Type</p><p>Connascence of Meaning(Convention)</p><p>Connascence of Position</p><p>Connascence of Algorithm</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="dynamic">Dynamic<a class="hash-link" href="#dynamic" title="Direct link to heading">​</a></h5><p>Connascence of Execution</p><p>Connascence of Timing</p><p>Connascence of Values</p><p>Connascence of Idedntity</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="strength">Strength<a class="hash-link" href="#strength" title="Direct link to heading">​</a></h5><p><img alt="img" src="/docs/intro/assets/images/fosa_0305-5542296a811da07ff4d2ad23c48830e0.png" width="933" height="756"></p><p>最简单的Refactoring比如消除magic value（Connascence of Meaning），代码中经常出现的字符串、整型，可以定义一个常量来做到Connascence of Name。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="locality">Locality<a class="hash-link" href="#locality" title="Direct link to heading">​</a></h5><p>共生的本地性，如同一个Component的两个class有共生关系，比两个Component要好。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="degree">Degree<a class="hash-link" href="#degree" title="Direct link to heading">​</a></h5><p>影响的code base的大小。就算是Dynamic connascence，如果代码仓库不大，影响也不大。但如果项目规模上去了，问题也会逐渐变严重。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="rule-of-thumb">Rule of thumb<a class="hash-link" href="#rule-of-thumb" title="Direct link to heading">​</a></h5><ol><li>Minimize overall connascence by breaking the system into encapsulated elements</li><li>Minimize any remaining connascence that crosses encapsulation boundaries</li><li>Maximize the connascence within encapsulation boundaries</li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="common-rules">Common Rules<a class="hash-link" href="#common-rules" title="Direct link to heading">​</a></h5><p>Rule of Degree: convert strong forms of connascence into weaker forms of connascence</p><p>Rule of Locality: as the distance between software elements increases, use weaker forms of connascence</p><p><img alt="img" src="/docs/intro/assets/images/fosa_0306-dc46eb8935a83d16273783e4396562b7.png" width="1420" height="565"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="architecture-characteristics-1">Architecture Characteristics<a class="hash-link" href="#architecture-characteristics-1" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="specifies-a-nondomain-design-consideration">Specifies a nondomain design consideration<a class="hash-link" href="#specifies-a-nondomain-design-consideration" title="Direct link to heading">​</a></h5><p>通常每个应用都会有需求（Requirements），代表你必须实现的功能。而Architecture characteristics则明确一些成功的指标，如何实现功能。比如xx模块的性能指标，通常Requirements里不会定，但Architecture Characteristics里会包含。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="influences-some-structural-aspect-of-the-design">Influences some structural aspect of the design<a class="hash-link" href="#influences-some-structural-aspect-of-the-design" title="Direct link to heading">​</a></h5><p>一些特殊的Case会影响架构的考量和设计</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="operational-architecture-characteristics">Operational Architecture Characteristics<a class="hash-link" href="#operational-architecture-characteristics" title="Direct link to heading">​</a></h5><table><thead><tr><th align="left">Term</th><th align="left">Definition</th></tr></thead><tbody><tr><td align="left">Availability</td><td align="left">How long the system will need to be available (if 24/7, steps need to be in place to allow the system to be up and running quickly in case of any failure).</td></tr><tr><td align="left">Continuity</td><td align="left">Disaster recovery capability.</td></tr><tr><td align="left">Performance</td><td align="left">Includes stress testing, peak analysis, analysis of the frequency of functions used, capacity required, and response times. Performance acceptance sometimes requires an exercise of its own, taking months to complete.</td></tr><tr><td align="left">Recoverability</td><td align="left">Business continuity requirements (e.g., in case of a disaster, how quickly is the system required to be on-line again?). This will affect the backup strategy and requirements for duplicated hardware.</td></tr><tr><td align="left">Reliability/safety</td><td align="left">Assess if the system needs to be fail-safe, or if it is mission critical in a way that affects lives. If it fails, will it cost the company large sums of money?</td></tr><tr><td align="left">Robustness</td><td align="left">Ability to handle error and boundary conditions while running if the internet connection goes down or if there’s a power outage or hardware failure.</td></tr><tr><td align="left">Scalability</td><td align="left">Ability for the system to perform and operate as the number of users or requests increases.</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="structural-architecture-characteristics">Structural Architecture Characteristics<a class="hash-link" href="#structural-architecture-characteristics" title="Direct link to heading">​</a></h5><table><thead><tr><th align="left">Term</th><th align="left">Definition</th></tr></thead><tbody><tr><td align="left">Configurability</td><td align="left">Ability for the end users to easily change aspects of the software’s configuration (through usable interfaces).</td></tr><tr><td align="left">Extensibility</td><td align="left">How important it is to plug new pieces of functionality in.</td></tr><tr><td align="left">Installability</td><td align="left">Ease of system installation on all necessary platforms.</td></tr><tr><td align="left">Leverageability/reuse</td><td align="left">Ability to leverage common components across multiple products.</td></tr><tr><td align="left">Localization</td><td align="left">Support for multiple languages on entry/query screens in data fields; on reports, multibyte character requirements and units of measure or currencies.</td></tr><tr><td align="left">Maintainability</td><td align="left">How easy it is to apply changes and enhance the system?</td></tr><tr><td align="left">Portability</td><td align="left">Does the system need to run on more than one platform? (For example, does the frontend need to run against Oracle as well as SAP DB?</td></tr><tr><td align="left">Upgradeability</td><td align="left">Ability to easily/quickly upgrade from a previous version of this application/solution to a newer version on servers and clients.</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="cross-cutting-architecture-characteristics">Cross-Cutting Architecture Characteristics<a class="hash-link" href="#cross-cutting-architecture-characteristics" title="Direct link to heading">​</a></h5><p>难以被分类的一些指标</p><table><thead><tr><th align="left">Term</th><th align="left">Definition</th></tr></thead><tbody><tr><td align="left">Accessibility</td><td align="left">Access to all your users, including those with disabilities like colorblindness or hearing loss.</td></tr><tr><td align="left">Archivability</td><td align="left">Will the data need to be archived or deleted after a period of time? (For example, customer accounts are to be deleted after three months or marked as obsolete and archived to a secondary database for future access.)</td></tr><tr><td align="left">Authentication</td><td align="left">Security requirements to ensure users are who they say they are.</td></tr><tr><td align="left">Authorization</td><td align="left">Security requirements to ensure users can access only certain functions within the application (by use case, subsystem, webpage, business rule, field level, etc.).</td></tr><tr><td align="left">Legal</td><td align="left">What legislative constraints is the system operating in (data protection, Sarbanes Oxley, GDPR, etc.)? What reservation rights does the company require? Any regulations regarding the way the application is to be built or deployed?</td></tr><tr><td align="left">Privacy</td><td align="left">Ability to hide transactions from internal company employees (encrypted transactions so even DBAs and network architects cannot see them).</td></tr><tr><td align="left">Security</td><td align="left">Does the data need to be encrypted in the database? Encrypted for network communication between internal systems? What type of authentication needs to be in place for remote user access?</td></tr><tr><td align="left">Supportability</td><td align="left">What level of technical support is needed by the application? What level of logging and other facilities are required to debug errors in the system?</td></tr><tr><td align="left">Usability/achievability</td><td align="left">Level of training required for users to achieve their goals with the application/solution. Usability requirements need to be treated as seriously as any other architectural issue.</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="domain-concerns">Domain Concerns<a class="hash-link" href="#domain-concerns" title="Direct link to heading">​</a></h5><table><thead><tr><th align="left">Domain concern</th><th align="left">Architecture characteristics</th></tr></thead><tbody><tr><td align="left">Mergers and acquisitions</td><td align="left">Interoperability, scalability, adaptability, extensibility</td></tr><tr><td align="left">Time to market</td><td align="left">Agility, testability, deployability</td></tr><tr><td align="left">User satisfaction</td><td align="left">Performance, availability, fault tolerance, testability, deployability, agility, security</td></tr><tr><td align="left">Competitive advantage</td><td align="left">Agility, testability, deployability, scalability, availability, fault tolerance</td></tr><tr><td align="left">Time and budget</td><td align="left">Simplicity, feasibility</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="operational-measures">Operational Measures<a class="hash-link" href="#operational-measures" title="Direct link to heading">​</a></h5><p>1%</p><p>除了平均性能，还应该能够测量Boundary conditions，如果1%的情况下性能很糟糕怎么办？很多情况下这些case并不会影响平均性能，但确实是问题。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="structural-measures">Structural Measures<a class="hash-link" href="#structural-measures" title="Direct link to heading">​</a></h5><p><a href="https://oreil.ly/mAHFZ" target="_blank" rel="noopener noreferrer">Cyclomatic Complexity (CC)</a></p><p>CC = E-N+2</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public void decision(int c1, int c2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (c1 &lt; 100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if (c1 + C2 &gt; 500)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return -1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><img alt="fosa 0601" src="/docs/intro/assets/images/fosa_0601-df2904da102d3dda5b6e7f9f4d6fe848.png" width="951" height="723"></p><p>通常来说，CC应当小于10。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="process-measures">Process Measures<a class="hash-link" href="#process-measures" title="Direct link to heading">​</a></h5><p>Test Coverage，Deploy Time等等</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="govarnance">Govarnance<a class="hash-link" href="#govarnance" title="Direct link to heading">​</a></h5><h5 class="anchor anchorWithStickyNavbar_mojV" id="fitness-functions">Fitness functions<a class="hash-link" href="#fitness-functions" title="Direct link to heading">​</a></h5><p><img alt="img" src="/docs/intro/assets/images/fosa_0602-a1ebd8d185c50096d72a6fb83e630ef4.png" width="980" height="747"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="conways-law">Conway’s law<a class="hash-link" href="#conways-law" title="Direct link to heading">​</a></h5><p><img alt="img" src="/docs/intro/assets/images/fosa_0804-bdfc5959d3bfbb5378a5343f91588417.png" width="1387" height="793"></p><p><em>Conway’s law</em>:</p><p><em>Organizations which design systems … are constrained to produce designs which are copies of the communication structures of these organizations.</em></p><p>通常在一个公司中，每个人的部门、职责都是根据业务模块划分的。然而，这也会导致对一些项目中共同问题的人为划分，人们会习惯将工作中的沟通模式带到设计模式中。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="architecture-style">Architecture style<a class="hash-link" href="#architecture-style" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="big-ball-of-mud">Big Ball of Mud<a class="hash-link" href="#big-ball-of-mud" title="Direct link to heading">​</a></h5><p><em>A Big Ball of Mud is a haphazardly structured, sprawling, sloppy, duct-tape-and-baling-wire, spaghetti-code jungle. These systems show unmistakable signs of unregulated growth, and repeated, expedient repair. Information is shared promiscuously among distant elements of the system, often to the point where nearly all the important information becomes global or duplicated.</em></p><p><em>The overall structure of the system may never have been well defined.</em></p><p><em>If it was, it may have eroded beyond recognition. Programmers with a shred of architectural sensibility shun these quagmires. Only those who are unconcerned about architecture, and, perhaps, are comfortable with the inertia of the day-to-day chore of patching the holes in these failing dikes, are content to work on such systems.</em></p><p>-- Brian Foote and Joseph Yoder</p><p>真·屎山，没有清晰的架构，无数内部的互相调用。尽力避免，但现实中还是会发生</p><p><img alt="img" src="/docs/intro/assets/images/fosa_0901-37a66a5384a7e86fd2031ef979d35c50.png" width="599" height="600"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="unitary-architecture">Unitary Architecture<a class="hash-link" href="#unitary-architecture" title="Direct link to heading">​</a></h5><p>单机架构</p><p>Client/Server</p><p>Desktop + database</p><p>Browser + webserver</p><p>Three tier</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="fallacies-of-distributed-architecture">Fallacies of distributed architecture<a class="hash-link" href="#fallacies-of-distributed-architecture" title="Direct link to heading">​</a></h5><p>Network is Reliable</p><p><img alt="Fallacy 1" src="/docs/intro/assets/images/fosa_0902-565db624b16a55e833320b1c6d87087e.png" width="1414" height="396"></p><p>Latency Is Zero</p><p><img alt="Fallacy 2" src="/docs/intro/assets/images/fosa_0903-838f98d257f5f2446e46ef36f0721b43.png" width="1414" height="587"></p><p>Bandwidth Is Infinite</p><p><img alt="Fallacy 3" src="/docs/intro/assets/images/fosa_0904-7c378d6e5db60508a42280fddb6bb1a3.png" width="1414" height="396"></p><p>The Network Is Secure</p><p><img alt="Fallacy 4" src="/docs/intro/assets/images/fosa_0905-d6b30f78a7b2b8e11e9d6a9602d07aa9.png" width="1406" height="400"></p><p>The Topology Never Changes</p><p><img alt="Fallacy 5" src="/docs/intro/assets/images/fosa_0906-151a4cfdccfd3569410e39d0bcc5bcdb.png" width="1414" height="453"></p><p>There Is Only One Administrator</p><p><img alt="Fallacy 6" src="/docs/intro/assets/images/fosa_0907-e3a34714238defc9e95d6b53c4ec6eec.png" width="1321" height="835"></p><p>Transport Cost Is Zero</p><p><img alt="Fallacy 7" src="/docs/intro/assets/images/fosa_0908-1d799c02a2ce72d2b3005b4e0a8ac2ea.png" width="1414" height="396"></p><p>The Network Is Homogeneous</p><p><img alt="Fallacy 8" src="/docs/intro/assets/images/fosa_0909-5d13345bd72024f2445c6868306110ad.png" width="1439" height="396"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="layered-architecture-style">Layered Architecture Style<a class="hash-link" href="#layered-architecture-style" title="Direct link to heading">​</a></h5><p><img alt="Standard logical layers" src="/docs/intro/assets/images/fosa_1001-6b990e217a0f2e9c611a0c11920e3fbc.png" width="841" height="467"></p><p>物理层面的不同切分</p><p><img alt="Physical topology variants" src="/docs/intro/assets/images/fosa_1002-45b9ee0773914605aecdde21749c7476.png" width="1403" height="631"></p><p>Layered architecture是一种典型的<em>technically partitioned</em>，按照技术来分层，而不是按照业务模块来区分。每一层的功能都是按照技术上的角色来划分的。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="architecture-sinkhole-antipattern">Architecture sinkhole antipattern<a class="hash-link" href="#architecture-sinkhole-antipattern" title="Direct link to heading">​</a></h5><p>这个其实很常见，经常会遇到。比如一个request打过来，真正的处理功能在第四层。但由于分层设计，它不能直接抵达第四层，所以前面三层都只是简单地pass through，甚至有些是trivial function，单纯地尾调用下一层函数而不经过任何处理。如果熟悉react的同学应该能理解，就有点像为了给一个子组件传参数，需要一层一层从最顶层组件向下传，带来巨大的不必要开销。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="rating">Rating<a class="hash-link" href="#rating" title="Direct link to heading">​</a></h5><p>通常Layered architecture适合简单的原型程序，或者还没有定下具体架构的程序。但是它简单，易实现。</p><p><img alt="Layered Ratings" src="/docs/intro/assets/images/fosa_1006-ca902768530f5c96265358fed0bbc053.png" width="1240" height="1401"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="pipeline">Pipeline<a class="hash-link" href="#pipeline" title="Direct link to heading">​</a></h5><p>比如MapReduce，就是这个pattern：</p><p><img alt="img" src="/docs/intro/assets/images/fosa_1101-e7c99518deee241972110a5cf02b8cf0.png" width="1336" height="434"></p><p>很多监控等也是用这种架构</p><p><img alt="Pipeline Example" src="/docs/intro/assets/images/fosa_1102-ff7ea9af1274fda61cd7b97c405742a4.png" width="1433" height="845"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="ratings">Ratings<a class="hash-link" href="#ratings" title="Direct link to heading">​</a></h5><p><img alt="Pipeline Ratings" src="/docs/intro/assets/images/fosa_1103-981bd09cf9371f8878b1cfdc6d7289a4.png" width="1240" height="1401"></p><p>和Layered差不多，Elasticity和Scalability都很差。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="microkernel-architecture">Microkernel Architecture<a class="hash-link" href="#microkernel-architecture" title="Direct link to heading">​</a></h5><p><img alt="Microkernel architecture core system variants" src="/docs/intro/assets/images/fosa_1202-1b92bec74b7253c607960dc76aca3925.png" width="1340" height="1749"></p><p>比如IDEA，很多ide都是这种结构，避免了如下情况的发生：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public void assessDevice(String deviceID) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if (deviceID.equals(&quot;iPhone6s&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      assessiPhone6s();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   } else if (deviceID.equals(&quot;iPad1&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      assessiPad1();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   } else if (deviceID.equals(&quot;Galaxy5&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      assessGalaxy5();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   } else ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>中间的Core System可以是Layered monolithic，Domain component等架构</p><p><img alt="Microkernel Ratings" src="/docs/intro/assets/images/fosa_1208-b9436c909ba6a98cac33b7fd2b976f06.png" width="1240" height="1401"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="service-based-architecture">Service Based Architecture<a class="hash-link" href="#service-based-architecture" title="Direct link to heading">​</a></h5><p><img alt="Service-based architecture basic topology" src="/docs/intro/assets/images/fosa_1301-fc33b7e36704afe1f6c956dd65263d45.png" width="1299" height="674"></p><p>比如Docker就是典型的例子</p><p><img alt="Service-based architecture API variant" src="/docs/intro/assets/images/fosa_1304-f7a2789e5b2acfc1cf2fc77310216f8e.png" width="1299" height="922"></p><p>增加一个Gateway/ Proxy layer可以提升整合性和安全性。Trade-off肯定是增加了额外的解析等开销。</p><p><img alt="Service-Based Ratings" src="/docs/intro/assets/images/fosa_1309-c3852aa806a0ed2d6c8326a2af6eb5d3.png" width="1240" height="1401"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="event-driven-architecture">Event-Driven Architecture<a class="hash-link" href="#event-driven-architecture" title="Direct link to heading">​</a></h5><p><img alt="Request-based Model" src="/docs/intro/assets/images/fosa_1401-3c82a47765ac54c56eaa8f6ced6fdec4.png" width="1403" height="727"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="broker-topology">Broker Topology<a class="hash-link" href="#broker-topology" title="Direct link to heading">​</a></h5><p>没有中心的Mediator，消息分布在各个组件去处理。在处理简单的消息时非常好用</p><p>通常是一个消息队列</p><table><thead><tr><th align="left">Advantages</th><th align="left">Disadvantages</th></tr></thead><tbody><tr><td align="left">Highly decoupled event processors</td><td align="left">Workflow control</td></tr><tr><td align="left">High scalability</td><td align="left">Error handling</td></tr><tr><td align="left">High responsiveness</td><td align="left">Recoverability</td></tr><tr><td align="left">High performance</td><td align="left">Restart capabilities</td></tr><tr><td align="left">High fault tolerance</td><td align="left">Data inconsistency</td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="mediator-topology">Mediator Topology<a class="hash-link" href="#mediator-topology" title="Direct link to heading">​</a></h5><p>处理复杂事件时，如果异常处理都让组件去做显得有些不合适，因为组件设计出来就是带着解耦合、可复用的目标的。这时就需要一个中心化的调停者去协调事件</p><p><img alt="Mediator Topology" src="/docs/intro/assets/images/fosa_1405-11ffa527eeab08b6d6d6c87b0340e9e3.png" width="1352" height="685"></p><p>Mediator通常都是设计为Domain（业务）划分或者一系列事件划分，来避免单点故障。</p><p>很多mediator如Apache Camel, 已经retire的Apache ODE等</p><p><img alt="Mediator Example 1" src="/docs/intro/assets/images/fosa_1408-e1f23395aaa37794407c1a3d95d1302d.png" width="1433" height="1603"></p><table><thead><tr><th align="left">Advantages</th><th align="left">Disadvantages</th></tr></thead><tbody><tr><td align="left">Workflow control</td><td align="left">More coupling of event processors</td></tr><tr><td align="left">Error handling</td><td align="left">Lower scalability</td></tr><tr><td align="left">Recoverability</td><td align="left">Lower performance</td></tr><tr><td align="left">Restart capabilities</td><td align="left">Lower fault tolerance</td></tr><tr><td align="left">Better data consistency</td><td align="left">Modeling complex workflows</td></tr></tbody></table><p>fire-and-forget processing (no response required) </p><p>可能需要额外的处理（FIFO队列）等来维护消息的顺序（如：操作1、2,1失败了，但2必须在1之后执行）</p><p><img alt="Workflow Event Pattern Example" src="/docs/intro/assets/images/fosa_1415-1e50e8eac197ff60f0940981b49ba764.png" width="1313" height="772"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="request-based-v-event-based">Request-Based v Event-Based<a class="hash-link" href="#request-based-v-event-based" title="Direct link to heading">​</a></h5><table><thead><tr><th align="left">Advantages over request-based</th><th align="left">Trade-offs</th></tr></thead><tbody><tr><td align="left">Better response to dynamic user content</td><td align="left">Only supports eventual consistency</td></tr><tr><td align="left">Better scalability and elasticity</td><td align="left">Less control over processing flow</td></tr><tr><td align="left">Better agility and change management</td><td align="left">Less certainty over outcome of event flow</td></tr><tr><td align="left">Better adaptability and extensibility</td><td align="left">Difficult to test and debug</td></tr><tr><td align="left">Better responsiveness and performance</td><td align="left"></td></tr><tr><td align="left">Better real-time decision making</td><td align="left"></td></tr><tr><td align="left">Better reaction to situational awareness</td><td align="left"></td></tr></tbody></table><h5 class="anchor anchorWithStickyNavbar_mojV" id="ratings-1">Ratings<a class="hash-link" href="#ratings-1" title="Direct link to heading">​</a></h5><p><img alt="Event-Driven Ratings" src="/docs/intro/assets/images/fosa_1422-7fd8386ebaecfcb268d293f9b6788fb4.png" width="1240" height="1401"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="space-based-architecture">Space-Based Architecture<a class="hash-link" href="#space-based-architecture" title="Direct link to heading">​</a></h5><p><img alt="Space-based architecture Topology" src="/docs/intro/assets/images/fosa_1502-84e948e0d86e14b031075e3156d5277d.png" width="1391" height="1033"></p><p>这应该是微服务之前的解决动态Elasticity和Scalability的方案了。中间直接加一层Virtualized Middleware，相当于把集群的资源都虚拟化成资源池了，然后应用根据实际情况去占用、分配资源。</p><table><thead><tr><th align="left">Decision criteria</th><th align="left">Replicated cache</th><th align="left">Distributed cache</th></tr></thead><tbody><tr><td align="left">Optimization</td><td align="left">Performance</td><td align="left">Consistency</td></tr><tr><td align="left">Cache size</td><td align="left">Small (&lt;100 MB)</td><td align="left">Large (&gt;500 MB)</td></tr><tr><td align="left">Type of data</td><td align="left">Relatively static</td><td align="left">Highly dynamic</td></tr><tr><td align="left">Update frequency</td><td align="left">Relatively low</td><td align="left">High update rate</td></tr><tr><td align="left">Fault tolerance</td><td align="left">High</td><td align="left">Low</td></tr></tbody></table><p><img alt="Space-based Ratings" src="/docs/intro/assets/images/fosa_1515-d82b75069f939d5ad51b3350f71e7fce.png" width="1240" height="1401"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="orchestration-driven-service-oriented-architecture">Orchestration-Driven Service-Oriented Architecture<a class="hash-link" href="#orchestration-driven-service-oriented-architecture" title="Direct link to heading">​</a></h5><p><img alt="img" src="/docs/intro/assets/images/fosa_1601-de5c56cfa426d5fa1d3ca4720b06bc29.png" width="1418" height="842"></p><p>假设有一个应用，它的消息流是这样的：</p><p><img alt="img" src="/docs/intro/assets/images/fosa_1602-b2ac20d87f12d5715acdcd67ea54a23d.png" width="1185" height="986"></p><p>然后我们由于为了复用组件，形成了下面的结构：</p><p><img alt="img" src="/docs/intro/assets/images/fosa_1604-edb6860bd340dfa11b0a3439570a63ec.png" width="1387" height="832"></p><p>这样的结构，真的好么？首先，Customer Service简直就是压力山大，想改个细微的东西都很困难，得得到茫茫多下游Service的同意，而协调的过程肯定少不了撕逼和扯皮，相信各位程序猿相对来说都会觉得这类事情比写代码还要麻烦。因此纯粹的技术上的分区、复用，现实中可能是非常糟糕的。</p><p><img alt="img" src="/docs/intro/assets/images/fosa_1605-47142f76f6ab09992d3c50eee1c3d1d4.png" width="1240" height="1401"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="microservices-architecture">Microservices Architecture<a class="hash-link" href="#microservices-architecture" title="Direct link to heading">​</a></h5><p>万恶之源 <a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="noopener noreferrer">“Microservices,”</a> Martin Fowler和James Lewis在2014年发布的博客</p><p><img alt="img" src="/docs/intro/assets/images/fosa_1701-12f95ded44d3491b9ea5e818b78e7465.png" width="1397" height="1013"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="bounded-context">Bounded Context<a class="hash-link" href="#bounded-context" title="Direct link to heading">​</a></h5><p>每个Service都代表一块业务或者某个流程。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="granularity">Granularity<a class="hash-link" href="#granularity" title="Direct link to heading">​</a></h5><p>The term “microservice” is a <em>label</em>, not a <em>description</em>.</p><p>-- Martin Fowler</p><p>太细粒度的设计，绝对会影响整体的业务。Microservice只是一个标签，一个名字，而不是戒条。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="sidecar">Sidecar<a class="hash-link" href="#sidecar" title="Direct link to heading">​</a></h5><p><img alt="img" src="/docs/intro/assets/images/fosa_1703-9f1bb8051e1ea8fee9dc65fae823922f.png" width="1431" height="868"></p><p>有些东西我们是希望和服务强耦合的，比如监控、日志、打点等。不同Service之间的Sidecar可以通过Service mesh进行统一管理。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="choreography">choreography<a class="hash-link" href="#choreography" title="Direct link to heading">​</a></h5><p>很像event driven里的broker topology，没有中间的协调者，也因此会出现异常处理等的麻烦。</p><p>也因此，最好不要在多个服务之间去做Transaction。</p><p><em>Don’t do transactions in microservices—fix granularity instead!</em></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="saga-pattern">Saga Pattern<a class="hash-link" href="#saga-pattern" title="Direct link to heading">​</a></h5><p>在发生异常时，做补偿操作</p><p><img alt="img" src="/docs/intro/assets/images/fosa_1712-f8d2b1b5c471af63ea15a388a2d59bce.png" width="1406" height="1189"></p><p><img alt="img" src="/docs/intro/assets/images/fosa_1713-6254c19988a9856364ee1740aa262402.png" width="1240" height="1401"></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="soft-skills">Soft Skills<a class="hash-link" href="#soft-skills" title="Direct link to heading">​</a></h4><p>看了一眼，还是挺有意思的。如果有幸能够成为一个Architect，那么可以尝试用一下（</p><p>首先就是不要怕做决定，要经常和Team沟通来保持信息畅通。</p><p>然后就是只通知相关受影响的人，不要去打扰无关的人。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="architecture-decision-records">Architecture Decision Records<a class="hash-link" href="#architecture-decision-records" title="Direct link to heading">​</a></h5><p>比如用Markdown 记录下决定</p><p><img alt="Basic ADR Structure" src="/docs/intro/assets/images/fosa_1901-b821b0d888c8fa4b9f70c65fb7b9f6b0.png" width="1145" height="1520"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="analyzing-risk">Analyzing Risk<a class="hash-link" href="#analyzing-risk" title="Direct link to heading">​</a></h5><p><img alt="Risk Matrix" src="/docs/intro/assets/images/fosa_2001-f2a066103e0f380bae5728334ec2f617.png" width="997" height="666"></p><p><img alt="Risk Assessment" src="/docs/intro/assets/images/fosa_2002-a26b57e1315aad4f26e7fda181c1e9d6.png" width="1435" height="758"></p><p><img alt="Assessment Direction 2" src="/docs/intro/assets/images/fosa_2005-10033ed6aa519710154ac0bdce834512.png" width="1435" height="758"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="team-boundaries">Team Boundaries<a class="hash-link" href="#team-boundaries" title="Direct link to heading">​</a></h5><p><img alt="Boundaries" src="/docs/intro/assets/images/fosa_2201-3d3e089e59f7e6f9d6279f8cce6b7dde.png" width="1373" height="546"></p><p>团队内关系很重要，太亲密太疏远都不好，拿捏这个平衡很难。</p><p>领导既不能是Armchair President甩手掌柜，也不能是Control Freak控制狂。</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="advices">Advices<a class="hash-link" href="#advices" title="Direct link to heading">​</a></h5><blockquote><p>How do we get great designers? Great designers design, of course.</p><p>Fred Brooks</p></blockquote><blockquote><p>So how are we supposed to get great architects, if they only get the chance to architect fewer than a half-dozen times in their career?</p><p>Ted Neward</p></blockquote><blockquote><p><em>There are not right or wrong answers in architecture—only</em> <em>trade-offs**.</em></p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/design/software_architecture_fundamentals.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/intro/docs/design/microservices"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Microservices Patterns</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/intro/docs/blockchain/Chainlink"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chainlink</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"></div></div></div></div></main></div></div></div>
<script src="/docs/intro/assets/js/runtime~main.20e46fe7.js"></script>
<script src="/docs/intro/assets/js/main.5f907212.js"></script>
</body>
</html>